<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<head th:replace="~{fragments :: head}"></head>
<header th:replace="fragments :: header"></header>
<body >
<div class="gradientBg p-3 pt-4">
    <form method="get"
          th:action="@{/listingsearch}"
          th:object="${searchListingsDTO}">
        <div id="searchbar">
            <label>Search:</label>
            <input type="text" name="searchTerm"></br>
        </div>

        <input type="checkbox" id="male" name="gender" th:value="M" th:field="*{genders}">
        <label for="male">M</label>
        <input type="checkbox" id="female" name="gender" th:value="W" th:field="*{genders}">
        <label for="female">F</label></br>

        <label>Brand:</label></br>

        <th:block th:if="${topBrands.size() == 0 or topBrands == null}">
            <p>No brands found. Please add brands to enable filtering.</p>
        </th:block>
        <th:block th:each="brand : ${topBrands}" th:if="${topBrands.size() > 0}" >
            <input type="checkbox" name="brands" th:value="${brand}" th:field="*{brands}">
            <label>
                <span th:text="${brand}"></span>
            </label></br>
        </th:block>

        <label>Size:</label></br>
        <div id="normalSizes">
            <th:block th:each="size : ${normalSizes}">
                <input type="checkbox" name="sizes" th:value="${size}" th:field="*{sizes}">
                <label>
                    <span th:text="${size}"></span>
                </label>
            </th:block></br>
        </div>

        <div id="allSizes" style="display: none;">
            <th:block th:each="size : ${allSizes}">
                <input type="checkbox" name="sizes" th:value="${size}" th:field="*{sizes}">
                <label>
                    <span th:text="${size}"></span>
                </label>
            </th:block></br>
        </div>
        <a href="#" id="sizesButton" onclick="toggleSizes()">View more sizes</a></br>

        <script>
            function toggleSizes() {
                let normalSizes = document.getElementById("normalSizes");
                let allSizes = document.getElementById("allSizes");
                let sizesButton = document.getElementById("sizesButton");

                if (normalSizes.style.display === "none") {
                    normalSizes.style.display = "block";
                    allSizes.style.display = "none";
                    sizesButton.innerText = "View More Sizes";
                } else {
                    normalSizes.style.display = "none";
                    allSizes.style.display = "block";
                    sizesButton.innerText = "View Less Sizes";
                }
            }
        </script>
        <label>Style:</label></br>
        <th:block th:if="${topStyles.size() == 0 or topStyles == null}">
            <p>No styles found. Please add styles to enable filtering.</p>
        </th:block>
        <th:block th:each="style : ${topStyles}" th:if="${topStyles.size() > 0}">
            <input type="checkbox" name="styles" th:value="${style}" th:field="*{styles}">
            <label>
                <span th:text="${style}"></span>
            </label></br>
        </th:block>

        <label>Condition:</label></br>

        <th:block th:each="condition : ${conditions}">
            <input type="checkbox" name="conditions" th:value="${condition}" th:field="*{conditions}">
            <label>
                <span th:text="${condition}"></span>
            </label></br>
        </th:block>
        <button type="submit">Search Listings</button>
    </form>

</div>
<th:block th:fragment="endingScripts">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</th:block>
</body>
</html>
