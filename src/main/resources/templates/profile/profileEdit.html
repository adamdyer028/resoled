<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/" xmlns="http://www.w3.org/1999/html">
<head th:replace="~{fragments :: head}"></head>
<header th:replace="~{fragments :: header}"></header>
<body class="m-2 gradientBg">

<h1>Edit User Profile</h1>


<form th:object="${userEntity}" th:action="@{../profile/profileEdit}" method="post" enctype="multipart/form-data">

    <div class="form-group file border border-3 rounded-4 border-secondary-subtle shadow-sm p-2">
        <div class="preview">
            <img id="file-ip-1-preview">
        </div>
        <input type="file" name="imageFiles" accept="image/*" id="image-input"
               onchange="showImagePreview(event);">
        <label class="btn button1 btn-lg shadow ms-2 m-2" for="image-input">Upload Image</label>
    </div>

        <label>Edit Display Name:
            <input type="text" th:field="*{displayName}" />
        </label>
        <br/>
        <label>Edit First Name:
            <input type="text" th:field="*{firstName}" />
        </label>
        <br/>
        <label>Edit Last Name:
            <input type="text" th:field="*{lastName}"  />
        </label>
        <br/>
        <label>Edit Email:
            <input type="text" th:field="*{email}" />
        </label>
        <br/>
    <button type="submit">Save</button>
    <a th:href="@{'../profile'}">Back to profile</a>
</form>

<script>
    function showImagePreview(event){
        if(event.target.files.length > 0){
            var src = URL.createObjectURL(event.target.files[0]);
            var preview = document.getElementById("file-ip-1-preview");
            preview.src = src;
            preview.style.display = "block";
            preview.style.width = "20em";
            preview.style.border = "2px solid hsla(0, 0%, 79%, 1)";
        }
    }
</script>

</body>
</html>