<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/" xmlns="http://www.w3.org/1999/html">
<head th:replace="~{fragments :: head}"></head>
<header th:replace="~{fragments :: header}"></header>
<body>
<div class="gradientBg p-3 pt-4">
    <div class="color2 container rounded-5  p-2 shadow-lg">
        <div class="color1 container rounded-5 p-3">
            <div class="gradientForm container rounded-5 shadow-lg p-4">
                <h1>User Profile</h1>

                <div th:object="${userEntity}">
                    <div th:if="${imageData}">
                        <img th:src="'data:image/jpeg;base64,' + ${imageData}" alt="Profile Image" class="profile-pic"/>
                    </div>
                    <div th:unless="${imageData}">
                        <img th:src="@{../images/TEST-PROFILE-PIC-NOT-LICENSED.png}" alt="Example Image"
                             class="profile-pic"/>
                    </div>
                    <p th:text="'DisplayName: ' + ${userEntity.displayName}"></p>
                    <p th:text="'Username: ' + ${userEntity.username}"></p>
                    <p th:text="'Email: ' + ${userEntity.email}"></p>
                    <p th:text="'First Name: ' + ${userEntity.firstName}"></p>
                    <p th:text="'Last Name: ' + ${userEntity.lastName}"></p>

                    <a th:href="@{'profile/profileEdit'}">Edit</a>
                    <a th:href="@{'home'}">Home</a>
                    </br>
                    </br>

                    <p th:if="${userEntity.roles[0].getName() == 'ADMIN'}"><a th:href="@{'admin'}">Admin Menu</a></p>

                    <H3>Listings</H3>
                    <div class="listing-container">
                        <div th:each="listing : ${userListings}" class="listing-item">
                            <div class="color1 container rounded-5 p-3">
                                <div class="gradientForm container rounded-5 shadow-lg p-4">
                                    <a th:href="'/listings/details?listingId=' + ${listing.id}"
                                       th:text="${listing.id}"></a>
                                    <p th:text="${listing.brand.name}"></p>
                                    <p th:text="${listing.style.name}"></p>
                                    <p th:text="${listing.size}"></p>
                                    <p th:text="${listing.userEntity.location.zipCode}"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>